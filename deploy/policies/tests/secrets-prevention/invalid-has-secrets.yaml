---
# INVALID: Pod with hardcoded OpenAI API key (should fail)
apiVersion: v1
kind: Pod
metadata:
  name: test-has-secrets-invalid
  namespace: ai-agents-dev
  labels:
    app: test-agent-bad
    tier: "2"
    framework-version: "2.1.0"
spec:
  serviceAccountName: tier-2-dev-sa
  securityContext:
    runAsNonRoot: true
    runAsUser: 1000
  containers:
  - name: agent
    image: nginx:1.21
    env:
    - name: LOG_LEVEL
      value: "info"
    # VIOLATION: Hardcoded OpenAI API key
    - name: OPENAI_API_KEY
      value: "sk-abc123def456ghi789jkl012mno345pqr678stu901vwx234yz"
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 2
        memory: 4Gi
    securityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop: ["ALL"]
      readOnlyRootFilesystem: true
